<aura:component implements="flexipage:availableForRecordHome,force:hasRecordId" access="global">
    <!-- ATTRIBUTE -->
    <aura:attribute
        name="state"
        type="Map"
        default="{
            isLoaded: false,
            recordLoaded: false,
            parentRelationshipApiName:'Cases',
            relatedFieldApiName: 'AccountId',
            currentRecordId: null,
            sortedDirection: 'DESC, ASC',
            numberOfRecords: 3,
            sobjectApiName: 'Case',
            customActions: [],
            tableTitle: 'Other Cases',
            tileFormat: false,
            iconName: 'standard:case',
            sortedBy: 'CreatedDate, Status',
            columns: [],
            recordId: null,
            fields: 'Id, CaseNumber, Status, Type, CreatedDate, Account.Id, Account.Name',
            relationForeignkeyField: null
        }"
    />
    <!-- We keep this attributes for avoid strange behavoir -->
    <aura:attribute name="recordId" type="String" default="" description="Record Identifier" />
    <aura:attribute name="caseRecord" type="Object" />

    <!-- HANDLER -->
    <aura:handler name="change" value="{!v.caseRecord}" action="{!c.loadData}" />

    <!-- LIBRARIES -->
    <ltng:require scripts="{!$Resource.LightningUtilities}" afterScriptsLoaded="{!c.initialize}"/>

    <!-- MARKUP -->
    <aura:if isTrue="{! v.state.isLoaded }">
        <force:recordData
            aura:id="recordLoader"
            recordId="{!v.recordId}"
            fields="AccountId, SuppliedEmail"
            targetFields="{!v.caseRecord}"
        />

        <aura:if isTrue="{! v.state.recordLoaded }">
            <c:GenericRelatedList parentState="{#v.state}" />
        </aura:if>
    </aura:if>
</aura:component>
